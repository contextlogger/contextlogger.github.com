<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>Koog Manual</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><style type="text/css" media="all">
.navi {
    background-color: #eeeeee;
    float: right;
    border: 1px solid #808080;
}
.navi td:hover {
    background-color: #aaaaaa;
}
</style><link rel="shortcut icon" href="http://www.hiit.fi/sites/all/themes/hiit/favicon.ico" type="image/x-icon" /></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td></td><td><a href="" class="tocviewselflink" pltdoc="x">Koog Manual</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#(part._concept)" class="tocviewlink" pltdoc="x">Concept</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#(part._terminology)" class="tocviewlink" pltdoc="x">Terminology</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#(part._features)" class="tocviewlink" pltdoc="x">Features</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#(part._api)" class="tocviewlink" pltdoc="x">API</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#(part._examples)" class="tocviewlink" pltdoc="x">Examples</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#(part._repo)" class="tocviewlink" pltdoc="x">Source Code Repository</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#(part._faq)" class="tocviewlink" pltdoc="x">Hardly Ever Asked Questions (HEAQ)</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#(part._concept)" class="tocsubseclink" pltdoc="x">Concept</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#(part._terminology)" class="tocsubseclink" pltdoc="x">Terminology</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#(part._features)" class="tocsubseclink" pltdoc="x">Features</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#(part._api)" class="tocsubseclink" pltdoc="x">API</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#(part._examples)" class="tocsubseclink" pltdoc="x">Examples</a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#(part._repo)" class="tocsubseclink" pltdoc="x">Source Code Repository</a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#(part._faq)" class="tocsubseclink" pltdoc="x">Hardly Ever Asked Questions (HEAQ)</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><table class="navi"><tr><th>Go to</th></td><tr><td><a href="../index.html">Koog</a></td></tr><tr><td><a href="http://hiit.fi/uix">UIx</a></td></tr><tr><td><a href="http://hiit.fi">HIIT</a></td></tr></table><h2><a name="(part._top)"></a>Koog Manual</h2><h3>1<tt>&nbsp;</tt><a name="(part._concept)"></a>Concept</h3><p><span style="font-style: italic">Mixed-code generation</span> is a form of template-based code generation where the template file is overwritten with the generated file, with the code generation directives intact. The term was (as far as we know) introduced by Jack Herrington in his book Code Generation in Action (Manning, 2003).</p><p>Koog can function as a traditional mixed-code generator for a host language that uses C language style comments. Koog also supports a restricted form of mixed-code generation where only specific regions of the source file are actually regenerated.</p><h3>2<tt>&nbsp;</tt><a name="(part._terminology)"></a>Terminology</h3><p>We define related terminology as follows:</p><p style="background-color: #eeeeee"><span style="font-weight: bold">Definition.</span> A <span style="font-style: italic">mixed-code generator</span> is a compiler that modifies its input based on instructions found in the input itself, and produces output which can be (repeatedly) refed to the compiler as valid input. The instructions, which are given in a (generator-dictated) <span style="font-style: italic">generator language</span>, are retained in the output. The input may also include some (potentially foreign) <span style="font-style: italic">host language</span> text, and the goal typically is for the entire generator output to be a valid host language document. Specially formatted host language comments in the input function both as: <span style="font-style: italic">directive</span>s specifying what text to generate; and as <span style="font-style: italic">marker</span>s identifying the <span style="font-style: italic">region</span>s of host language text that are allowed to be replaced. A region and its enclosing markers together constitute a <span style="font-style: italic">section</span>.</p><h3>3<tt>&nbsp;</tt><a name="(part._features)"></a>Features</h3><ul><li><p>Supports PLT Scheme version 4 and Racket (PLT Scheme version 5).</p></li><li><p>Includes a Scheme API, command-line interface, and Emacs/Vim editor integration.</p></li><li><p><div class="SIntrapara">It is possible to:</div><div class="SIntrapara"><ul><li><p>Expand all regions in a file, or only expand a chosen region (specified by   line number).</p></li><li><p>Remove code generation directives (for one-off operations).</p></li><li><p>Simulate an expansion (see what would be changed without changes to the input file).</p></li><li><p>Filter standard input (and print the result to standard output).</p></li></ul></div></p></li></ul><h3>4<tt>&nbsp;</tt><a name="(part._api)"></a>API</h3><p>The provided APIs are fairly self-explanatory, so look at the source code.</p><p>The primary module is <a href="../src/koog.ss"><span class="RktSym">koog/koog</span></a>, which exports the <span class="RktSym"><span class="badlink"><span class="RktValLink">koog-expand</span></span></span> function, and some parameters affecting its behavior.</p><p>The <a href="../src/cli.ss"><span class="RktSym">koog/cli</span></a> module only exports a <span class="RktSym"><span class="badlink"><span class="RktValLink">main</span></span></span> function that parses command-line options and accordingly sets parameters for <span class="RktSym"><span class="badlink"><span class="RktValLink">koog-expand</span></span></span> prior to invoking it.</p><p>The <a href="../src/runtime.ss"><span class="RktSym">koog/runtime</span></a> module exports parameters that make context information available to code generation directives. It is not necessary for directives to explicitly <span class="RktSym">require</span> this module.</p><h3>5<tt>&nbsp;</tt><a name="(part._examples)"></a>Examples</h3><p>Here are some real-world examples from the <a href="http://contextlogger.github.io/">ContextLogger2</a> codebase:</p><ul><li><p><a href="http://korpi.hiit.fi/contextlogger2/daemon/private-cxx-api/html/epoc-indicator_8hpp-source.html">generating code for Symbian two-phase construction</a>;</p></li><li><p><a href="http://korpi.hiit.fi/contextlogger2/daemon/private-cxx-api/html/lua__bindings_8cpp-source.html">generating boilerplate code for Lua bindings</a>;</p></li><li><p><a href="http://korpi.hiit.fi/contextlogger2/daemon/private-cxx-api/html/cf__rcfile_8cpp-source.html">fetching a multi-line string from a file and declaring it as a CPP (preprocessor) definition</a>.</p></li></ul><h3>6<tt>&nbsp;</tt><a name="(part._repo)"></a>Source Code Repository</h3><p>Koog source code is retrievable with <a href="http://git-scm.com/">Git</a>:</p><blockquote><p><span class="stt">git clone git://github.com/contextlogger/koog.git</span></p></blockquote><h3>7<tt>&nbsp;</tt><a name="(part._faq)"></a>Hardly Ever Asked Questions (HEAQ)</h3><p><span style="font-weight: bold">Q:</span> Where does the name "Koog" come from?<br />
<span style="font-weight: bold">A:</span> It is short for the Finnish word "<span style="font-style: italic">koo</span>di<span style="font-style: italic">g</span>eneraattori" (code generator).</p></div></div><div id="contextindicator">&nbsp;</div><hr class="light"/><p><a href="../index.html">Koog</a> utility manual, by <a href="http://hiit.fi/u/hasu/">Tero Hasu</a>. Last modified Fri Apr 29 13:26:26 +0300 2011.</p></body></html>
